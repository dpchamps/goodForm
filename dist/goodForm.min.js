/*! goodForm 02-01-2015 */
!function(a){"use strict";var b=function(a,c,d){"undefined"==typeof d&&(d=!1);for(var e=Array.prototype.slice.call(arguments),f=1;f<e.length;f++)for(var g in e[f])e[f].hasOwnProperty(g)&&(d&&"object"==typeof e[f][g]&&e[f][g]instanceof Array==!1?(a[g]=a[g]||{},b(a[g],e[f][g])):a[g]=e[f][g]);return a},c={};c.extend=b;var d={doc:a.document};b(c,d),c.helpers={addClass:function(a,b){for(var c=!1,d=0;d<a.classList.length;d++)null!==a.classList[d].match(b)&&(c=!0);c||(a.className+=" "+b)},removeClass:function(a,b){var c=new RegExp("(?:^|\\s)"+b+"(?!\\S)","g");a.className=a.className.replace(c,"")},setCaretPosition:function(a,b){a.setSelectionRange(b,b)},replaceAt:function(a,b,c){return a.substr(0,b)+c+a.substr(b+1,a.length)},isNumber:function(a){return a.match(/[0-9]/)?!0:!1}};var e=function(a,b){if("undefined"==typeof a)throw new Error("placeholder undefined");"undefined"==typeof b&&(b="5"),a=a.replace(/[#]/g,b);for(var c=[],d=0,e="",f=a,g=0,h=0,i=0;i<f.length;i++)"{"!==f[i]||0!==d?"}"!==f[i]||1!==d?1!==d?0===d&&(e+=f[i]):(e+=f[i],c[g++]=i-h):(d--,h+=1):(d++,h+=1);return{value:e,charMap:c,numberMask:b}};c.parsePlaceholder=e,c.addNumberMask=function(b,d){function e(a){if(a.which<48){var b=m.selectionStart;switch(a.preventDefault(),a.which){case 8:if(b===j.charMap[0]+1);else{var d=j.charMap.slice(1,j.charMap.length).reverse();d.forEach(function(a){b-1===a&&(m.selectionStart=b-1,m.selectionEnd=b-1,l--,b-=1)}),m.value=c.helpers.replaceAt(m.value,b-1,j.numberMask),m.placeholder=m.value,m.selectionStart=b-1,m.selectionEnd=b-1,l--,k=m.value}}}}function f(a){a.preventDefault();var b=String.fromCharCode(a.which);if(l<m.maxLength&&c.helpers.isNumber(b)){var d=m.selectionStart;m.value=c.helpers.replaceAt(m.value,m.selectionStart,b),m.placeholder=m.value,l++,c.helpers.setCaretPosition(m,d+1),j.charMap.forEach(function(a){m.selectionStart===a&&(c.helpers.setCaretPosition(m,a+1),l++)}),k=m.value}}function g(a){a.preventDefault(),l<=j.charMap[0]+1?(m.value=j.value,c.helpers.setCaretPosition(m,j.charMap[0]+1),l=j.charMap[0]+1):(m.value=k,m.selectionStart=l,m.selectionEnd=l)}function h(b){b.preventDefault(),c.helpers.removeClass(m,"valid"),c.helpers.removeClass(m,"invalid"),a.addEventListener("keydown",e,!1),a.addEventListener("keypress",f,!1)}function i(b){b.preventDefault(),l===m.maxLength?c.helpers.addClass(m,"valid"):(c.helpers.addClass(m,"invalid"),m.value=""),a.removeEventListener("keydown",e,!1),a.removeEventListener("keypress",f,!1)}var j=this.parsePlaceholder(d.placeholder,d.numberMask),k="",l=0,m=this.doc.getElementById(b);m.maxLength=j.value.length,m.addEventListener("click",g,!1),m.addEventListener("focus",h,!1),m.addEventListener("blur",i,!1)},a.GoodForm=c}(this);